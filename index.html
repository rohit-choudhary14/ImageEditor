<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Free Image Editor</title>
    <link rel="icon" type="image/x-icon" href="images (2).png" />
    <meta
      content="width=device-width, initial-scale=1, maximum-scale=1"
      name="viewport"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script
      src="https://code.jquery.com/jquery-3.6.1.js"
      integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
      crossorigin="anonymous"
    ></script>

    <style>
      img {
        -webkit-filter: saturate(100%) brightness(100%) grayscale(0%) sepia(0%)
          invert(0%) blur(0px) contrast(1);
        filter: saturate(100%) brightness(100%) grayscale(0%) sepia(0%)
          invert(0%) blur(0px) contrast(1);
      }
      #file_select_section{
        position: fixed;
        top: 93%;
        width: 100%;
        height: auto;
        align-item: center;
        justify-content: center;
      }
      input{
        cursor: pointer;
      }
      nav {
        background-color: #e91e63;
        box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.4);
        height: 60px;
      }
      #demo_img {
       
      }
      #dashed_col {
      }

      #c {
        border: dashed 1px black;
        display: none;
      }

      .fa.fa-bars.text-light.mt-1 {
        cursor: pointer;
        font-size: 30px;
      }
      #image_manager {
        box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.4);
        border-radius: 15px;
      }
    </style>
  </head>

  <body>
    <nav class="sticky-top py-2">
     
	   <div class="col-sm-12 d-flex justify-content-around mt-1">
            <i class="fa fa-bars text-light mt-1"></i>
              <button
                class="btn btn-success"
                style="background: #3b1470; border: #3b1470"
                onclick="handleInputFileButton()"
              >
                BROWES FILE
              </button>
           
              <a
                class="btn btn-primary "
                style="pointer-events: none"
                id="download"
                >DOWNLOAD</a
              >
            
          </div>
    </nav>

    <!--- input your image---->
    <div class="container" >
      <div class="row card-body">
        <div class="col-sm-12">
          <center><canvas id="c"></canvas></center>
        </div>
        <div class="col-sm-12 card-body">
          <div class="row card-body">
            <div class="col-sm-12 card-body" id="image_manager">
              <div class="row">
                <div class="col-sm-12" id="dashed_col">
                  <center>
                    <img src="demo.jpg" id="demo_img" class="img-fluid" />
                  </center>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-12">
                  <div class="row">
                    <div class="col-sm-12 mt-3">
                      <div class="row">
                        <div class="col-sm-12">
                          <small>Blur</small>
                        </div>
                        <div class="col-sm-12 d-flex">
                          <input
                            type="range"
                            min="0"
                            max="10"
                            value="0"
                            disabled
                            id="blury"
                            onchange="bluring()"
                          />
                          <h6 id="blur_value">0 px</h6>
                        </div>
                      </div>
                    </div>

                    <div class="col-sm-12">
                      <div class="row">
                        <div class="col-sm-12">
                          <small>Sepia</small>
                        </div>
                        <div class="col-sm-12 d-flex">
                          <input
                            type="range"
                            disabled
                            min="0"
                            max="100"
                            value="0"
                            id="sepia"
                            onchange="sepia()"
                          />
                          <h6 id="sepia_value">0%</h6>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-12">
                      <div class="row">
                        <div class="col-sm-12">
                          <small>Invert</small>
                        </div>
                        <div class="col-sm-12 d-flex">
                          <input
                            type="range"
                            disabled
                            min="0"
                            max="100"
                            value="0"
                            id="invert"
                            onchange="invert()"
                          />
                          <h6 id="invert_value">0%</h6>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-12">
                      <div class="row">
                        <div class="col-sm-12">
                          <small>Contrast</small>
                        </div>
                        <div class="col-sm-12 d-flex">
                          <input
                            type="range"
                            disabled
                            min="0"
                            max="1000"
                            id="contrast"
                            onchange="contrast()"
                          />
                          <h6 id="contrast_value">0%</h6>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-12">
                      <div class="row">
                        <div class="col-sm-12">
                          <small>brightness</small>
                        </div>
                        <div class="col-sm-12 d-flex">
                          <input
                            type="range"
                            disabled
                            min="0"
                            max="500"
                            value="100"
                            id="brighter"
                            onchange="brighting()"
                          />
                          <h6 id="brightness_value">100%</h6>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-12">
                      <div class="row">
                        <div class="col-sm-12">
                          <small>Saturation</small>
                        </div>
                        <div class="col-sm-12 d-flex">
                          <input
                            type="range"
                            disabled
                            min="0"
                            max="500"
                            value="0"
                            id="satur"
                            onchange="satr()"
                          />
                          <h6 id="saturation_value">0%</h6>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- browes your file button--->
   
    <input
      type="file"
      id="infile"
      style="opacity: 0"
      onchange="handleFiles(this.files)"
    />
  </body>
  <!-- handling asidebar--->

  <script>
    const handleInputFileButton = () => {
      document.getElementById("infile").click();
    };
    let dis_arr = ["blury", "sepia", "invert", "contrast", "brighter", "satur"];
    const remove_input_att = (arr) => {
      arr.forEach((element) => {
        document.getElementById(element).removeAttribute("disabled");
      });
    };
    const handleChangeData = () => {
      document.getElementById("blur_value").innerHTML = blur + "px";
      
      document.getElementById("sepia_value").innerHTML = sepia_DATA + "%";
      document.getElementById("invert_value").innerHTML = invert_DATA + "%";
      document.getElementById("contrast_value").innerHTML = contrast_DATA + "%";
      document.getElementById("brightness_value").innerHTML =
        brightness_DATA + "%";
      document.getElementById("saturation_value").innerHTML =
        staurated_DATA + "%";
     
    };
    let window_height;
    let window_width;
    let img_height;
    let img_width;
    let canvas = document.getElementById("c");
    let ctx = canvas.getContext("2d");
    let imger = new Image();
    imger.addEventListener(
      "load",
      function (e) {
        window_height = screen.height;
        window_width = screen.width;
        if(e.target.height<=810){
		     img.src = imger.src;
			canvas.height = e.target.height;
			canvas.width = e.target.width;
			img_height = e.target.height;
			img_width = e.target.width;
			ctx.filter = "none";
			ctx.drawImage(imger, 0, 0, img_width, img_height);
			window.URL.revokeObjectURL(this.src);
			
			remove_input_att(dis_arr);
		}
		else{
		   alert(`image height exceed it shoud me under 800 we are redirecting you to image resizer`);
		   window.location.href='resize.html';
		 
		}
      },
      false
    );
    let grayscale_DATA = 0;
    let blur = 0;
    let brightness_DATA = 100;
    let sepia_DATA = 0;
    let invert_DATA = 0;
    let staurated_DATA = 100;
    let contrast_DATA = 100;
    let img;
    const bluring = () => {
      blur = document.getElementById("blury").value;
      img.style.cssText =
        "-webkit-filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";
      img.style.cssText =
        "filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";

      ctx.filter =
        "sepia(" +
        sepia_DATA +
        "%) saturate(" +
        staurated_DATA +
        "%) blur(" +
        blur +
        "px) brightness(" +
        brightness_DATA +
        "%) invert(" +
        invert_DATA +
        "%) contrast(" +
        contrast_DATA +
        "%)";
      ctx.drawImage(imger, 0, 0, img_width, img_height);
      handleChangeData();
    };
    const sepia = () => {
      sepia_DATA = document.getElementById("sepia").value;
      img.style.cssText =
        "-webkit-filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";
      img.style.cssText =
        "filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";

      ctx.filter =
        "sepia(" +
        sepia_DATA +
        "%) saturate(" +
        staurated_DATA +
        "%) blur(" +
        blur +
        "px) brightness(" +
        brightness_DATA +
        "%) invert(" +
        invert_DATA +
        "%) contrast(" +
        contrast_DATA +
        "%)";
      ctx.drawImage(imger, 0, 0, img_width, img_height);
      handleChangeData();
    };
    const invert = () => {
      invert_DATA = document.getElementById("invert").value;
      img.style.cssText =
        "-webkit-filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";
      img.style.cssText =
        "filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";

      ctx.filter =
        "sepia(" +
        sepia_DATA +
        "%) saturate(" +
        staurated_DATA +
        "%) blur(" +
        blur +
        "px) brightness(" +
        brightness_DATA +
        "%) invert(" +
        invert_DATA +
        "%) contrast(" +
        contrast_DATA +
        "%)";
      ctx.drawImage(imger, 0, 0, img_width, img_height);
      handleChangeData();
    };
    const contrast = () => {
      contrast_DATA = document.getElementById("contrast").value;
      img.style.cssText =
        "-webkit-filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";
      img.style.cssText =
        "filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";

      ctx.filter =
        "sepia(" +
        sepia_DATA +
        "%) saturate(" +
        staurated_DATA +
        "%) blur(" +
        blur +
        "px) brightness(" +
        brightness_DATA +
        "%) invert(" +
        invert_DATA +
        "%) contrast(" +
        contrast_DATA +
        "%)";
      ctx.drawImage(imger, 0, 0, img_width, img_height);
      handleChangeData();
    };
    const brighting = () => {
      brightness_DATA = document.getElementById("brighter").value;
      img.style.cssText =
        "-webkit-filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";
      img.style.cssText =
        "filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";

      ctx.filter =
        "sepia(" +
        sepia_DATA +
        "%) saturate(" +
        staurated_DATA +
        "%) blur(" +
        blur +
        "px) brightness(" +
        brightness_DATA +
        "%) invert(" +
        invert_DATA +
        "%) contrast(" +
        contrast_DATA +
        "%)";
      ctx.drawImage(imger, 0, 0, img_width, img_height);
      handleChangeData();
    };
    const satr = () => {
      staurated_DATA = document.getElementById("satur").value;
      img.style.cssText =
        "-webkit-filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";
      img.style.cssText =
        "filter: saturate(" +
        staurated_DATA +
        "%) brightness(" +
        brightness_DATA +
        "%) grayscale(" +
        grayscale_DATA +
        "%) sepia(" +
        sepia_DATA +
        "%) invert(" +
        invert_DATA +
        "%) blur(" +
        blur +
        "px) contrast(" +
        contrast_DATA +
        "%);";

      ctx.filter =
        "sepia(" +
        sepia_DATA +
        "%) saturate(" +
        staurated_DATA +
        "%) blur(" +
        blur +
        "px) brightness(" +
        brightness_DATA +
        "%) invert(" +
        invert_DATA +
        "%) contrast(" +
        contrast_DATA +
        "%)";
      ctx.drawImage(imger, 0, 0, img_width, img_height);
      handleChangeData();
    };

    function handleFiles(files) {
      if (files.length) {
        imger.src = window.URL.createObjectURL(files[0]);
        img = document.getElementById("demo_img");
       
      }
    }
    //Download button
    let download = document.getElementById("download");
    download.addEventListener(
      "click",
      function (ev) {
        let fileName = prompt("Name your file");

        download.href = canvas.toDataURL();
        download.download = fileName + ".png";
      },
      false
    );
  </script>
</html>
